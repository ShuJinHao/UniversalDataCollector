<Window x:Class="UniversalDataCollector.Views.MonitorSettingWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:UniversalDataCollector.ViewModels"
        Title="监控配置" Height="500" Width="550" WindowStartupLocation="CenterScreen">

    <Window.DataContext>
        <vm:MonitorSettingViewModel />
    </Window.DataContext>

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="20">
            <GroupBox Header="监控模式" Margin="0,0,0,15" Padding="10">
                <StackPanel Orientation="Horizontal">
                    <RadioButton Content="单文件监控" IsChecked="{Binding IsFileMode}" Margin="0,0,20,0" />
                    <RadioButton Content="文件夹监控" IsChecked="{Binding IsFolderMode}" />
                </StackPanel>
            </GroupBox>

            <GroupBox Header="单文件设置" Margin="0,0,0,15" Padding="10" IsEnabled="{Binding IsFileMode}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <TextBox Text="{Binding TargetFilePath, UpdateSourceTrigger=PropertyChanged}" Height="28" VerticalContentAlignment="Center" />
                    <Button Grid.Column="1" Content="浏览..." Click="SelectFile_Click" Width="60" Margin="5,0,0,0" />
                </Grid>
            </GroupBox>

            <GroupBox Header="文件夹设置" Margin="0,0,0,15" Padding="10" IsEnabled="{Binding IsFolderMode}">
                <StackPanel>
                    <TextBlock Text="目录路径:" Margin="0,0,0,5" />
                    <Grid Margin="0,0,0,10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <TextBox Text="{Binding TargetFolderPath, UpdateSourceTrigger=PropertyChanged}" Height="28" VerticalContentAlignment="Center" />
                        <Button Grid.Column="1" Content="选择..." Click="SelectFolder_Click" Width="60" Margin="5,0,0,0" />
                    </Grid>
                    <TextBlock Text="文件名过滤 (如 *.csv):" Margin="0,0,0,5" />
                    <TextBox Text="{Binding FileNamePattern, UpdateSourceTrigger=PropertyChanged}" Height="28" VerticalContentAlignment="Center" />
                </StackPanel>
            </GroupBox>

            <GroupBox Header="扫描频率" Margin="0,0,0,20" Padding="10">
                <StackPanel>
                    <Slider Minimum="1" Maximum="60" Value="{Binding IntervalSeconds}" TickFrequency="1" IsSnapToTickEnabled="True" />
                    <TextBlock Text="{Binding IntervalSeconds, StringFormat={}{0} 秒}" HorizontalAlignment="Right" Margin="0,5,0,0" />
                </StackPanel>
            </GroupBox>

            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Content="保存并重启" Command="{Binding SaveCommand}" Width="100" Height="30" Background="#4CAF50" Foreground="White" BorderThickness="0" Margin="0,0,10,0" />
                <Button Content="取消" Click="Close_Click" Width="80" Height="30" />
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</Window>